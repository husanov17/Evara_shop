{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--=============== FLATICON ===============-->
    <link
      rel="stylesheet"
      href="https://cdn-uicons.flaticon.com/2.0.0/uicons-regular-straight/css/uicons-regular-straight.css"
    />

    <!--=============== SWIPER CSS ===============-->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <!--=============== CSS ===============-->
    <link rel="stylesheet" href="{% static 'assets/css/styles.css' %}" />

    <style>
      #toast-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Toast asosiy dizayni */
.toast {
    background-color: #333;
    color: white;
    padding: 14px 18px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    opacity: 0;
    transform: translateX(100%);
    animation: slideIn 0.5s forwards, fadeOut 0.5s 2.5s forwards;
}

/* Turli statuslar uchun ranglar */
.toast.success { background-color: #28a745; }  /* yashil */
.toast.error { background-color: #dc3545; }    /* qizil */
.toast.warning { background-color: #ffc107; color: #222; } /* sariq */
.toast.info { background-color: #17a2b8; }     /* ko‘k */

/* Kirish animatsiyasi */
@keyframes slideIn {
    from { opacity: 0; transform: translateX(100%); }
    to { opacity: 1; transform: translateX(0); }
}

/* 3 sekunddan keyin chiqib ketish animatsiyasi */
@keyframes fadeOut {
    from { opacity: 1; transform: translateX(0); }
    to { opacity: 0; transform: translateX(100%); }
}
    </style>

    <title>Ecommerce Website</title>
  </head>
  <body>
    <!--=============== HEADER ===============-->
    <header class="header">
      {% if not request.user.is_authenticated %}
          <div class="header__top">
            <div class="header__container container">
              <div class="header__contact">
                <span>(+998)-20-010-7708</span>
                <span>Lokatsiyamiz</span>
              </div>
              <p class="header__alert-news">
                Eng arzon mahsulotlar - faqat bizda!
              </p>
                <div>
                  <a href="{% url 'login_user' %}" class="header__top-action">
                    Log In /
                  </a>
                  <a href="{% url 'register_user' %}" class="header__top-action">
                    Sign Up
                  </a>
                </div>
            </div>
          </div>
      {% endif %}
      {% if messages %}
      <div id="toast-container">
          {% for message in messages %}
          <div class="toast {{ message.tags }}">
              {{ message }}
          </div>
          {% endfor %}
      </div>
      {% endif %}

      <nav class="nav container">
        <a href="{% url 'dashboard' %}" class="nav__logo">
          <img
            class="nav__logo-img"
            src="{% static 'assets/img/logo.svg' %}"
            alt="website logo"
          />
        </a>
        <div class="nav__menu" id="nav-menu">
          <div class="nav__menu-top">
            <a href="index.html" class="nav__menu-logo">
              <img src="{% static 'assets/img/logo.svg' %}" alt="">
            </a>
            <div class="nav__close" id="nav-close">
              <i class="fi fi-rs-cross-small"></i>
            </div>
          </div>
          <ul class="nav__list">
            <li class="nav__item">
              <a href="{% url 'dashboard' %}" class="nav__link {% if request.path == '/' %}active-link {% endif %}">Bosh sahifa</a>
            </li>
            <li class="nav__item">
              <a href="{% url 'shop' %}" class="nav__link nav__link {% if request.path == '/shop/' %}active-link {% endif %}">Mahsulotlar</a>
            </li>
            <li class="nav__item">
              <a href="{% url 'profile' %}" class="nav__link {% if request.path == '/profile/' %}active-link {% endif %}">Profilim</a>
            </li>
            {% if request.user.is_authenticated %}
                <li class="nav__item">
                  <a href="{% url 'logout_user' %}" class="nav__link">Log Out</a>
                </li>
            {% endif %}
          </ul>
          <div class="header__search">
            <form method="get">
                <input
                  type="text"
                  placeholder="Mahsulotlar ichidan qidiring..."
                  class="form__input",
                  name="q"
                />
                <button class="search__btn", type="submit">
                  <img src="{% static 'assets/img/search.png' %}" alt="search icon" />
                </button>
            </form>
          </div>
        </div>
        <div class="header__user-actions">
          <a href="wishlist.html" class="header__action-btn" title="Wishlist">
            <img src="{% static 'assets/img/icon-heart.svg' %}" alt="" />
            <span class="count">3</span>
          </a>
          <a href="{% url 'cart_page' %}" class="header__action-btn" title="Cart">
            <img src="{% static 'assets/img/icon-cart.svg' %}" alt="" />
            <span class="count" id="cart_count">{{cart_count}}</span>
          </a>
          <div class="header__action-btn nav__toggle" id="nav-toggle">
            <img src="./assets//img/menu-burger.svg" alt="">
          </div>
        </div>
      </nav>
    </header>

    <main class="main">
        {% block main %}
        {% endblock main %}
    </main>

    <!--=============== FOOTER ===============-->
    <footer class="footer container">
      <div class="footer__container grid">
        <div class="footer__content">
          <a href="index.html" class="footer__logo">
            <img src="{% static 'assets/img/logo.svg' %}" alt="" class="footer__logo-img" />
          </a>
          <h4 class="footer__subtitle">Contact</h4>
          <p class="footer__description">
            <span>Address:</span> Fergana
          </p>
          <p class="footer__description">
            <span>Phone:</span> +998 20 001 77 08 /(+998) 33 101 77 08
          </p>
          <p class="footer__description">
            <span>Hours:</span> 07:00 - 20:00, Mon - Sat
          </p>
          <div class="footer__social">
            <h4 class="footer__subtitle">Follow Me</h4>
            <div class="footer__links flex">
              <a href="https://instagram.com/husanov_.001" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                <img
                  src="{% static 'assets/img/icon-instagram.svg' %}"
                  alt="Instagram"
                  class="footer__social-icon"
                />
              </a>
              <a href="#">
                <img
                  src="{% static 'assets/img/icon-youtube.svg' %}"
                  alt=""
                  class="footer__social-icon"
                />
              </a>
            </div>
          </div>
        </div>
        <div class="footer__content">
          <h3 class="footer__title">Address</h3>
          <ul class="footer__links">
            <li><a href="#" class="footer__link">About Us</a></li>
            <li><a href="#" class="footer__link">Delivery Information</a></li>
            <li><a href="#" class="footer__link">Privacy Policy</a></li>
            <li><a href="#" class="footer__link">Terms & Conditions</a></li>
            <li><a href="#" class="footer__link">Contact Us</a></li>
            <li><a href="#" class="footer__link">Support Center</a></li>
          </ul>
        </div>
        <div class="footer__content">
          <h3 class="footer__title">My Account</h3>
          <ul class="footer__links">
            <li><a href="#" class="footer__link">Sign In</a></li>
            <li><a href="#" class="footer__link">View Cart</a></li>
            <li><a href="#" class="footer__link">My Wishlist</a></li>
            <li><a href="#" class="footer__link">Track My Order</a></li>
            <li><a href="#" class="footer__link">Help</a></li>
            <li><a href="#" class="footer__link">Order</a></li>
          </ul>
        </div>
        <div class="footer__content">
          <h3 class="footer__title">Secured Payed Gateways</h3>
          <img
            src="{% static 'assets/img/payment-method.png' %}"
            alt=""
            class="payment__img"
          />
        </div>
      </div>
      <div class="footer__bottom">
        <p class="copyright">&copy; 2024 Evara. All right reserved</p>
        <span class="designer">Designer by Crypticalcoder</span>
      </div>
    </footer>

    <!--=============== SWIPER JS ===============-->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!--=============== MAIN JS ===============-->
    <script src="{% static 'assets/js/main.js' %}"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
    // Toastlar 3 soniyadan keyin avtomatik o‘chadi
    setTimeout(() => {
        document.querySelectorAll('.toast').forEach(toast => toast.remove());
    }, 3000);
});
</script>
  </body>
</html>
